{"ast":null,"code":"// Next.js API route support: https://nextjs.org/docs/api-routes/introduction\nimport { makeOrFindJob } from \"../../utils/crontab\";\nimport { serialiseJob } from \"../../utils/helpers\";\nexport default (async (req, res) => {\n  const payload = JSON.parse(req.body);\n  const {\n    job,\n    jobs,\n    error\n  } = await makeOrFindJob(payload);\n\n  if (error) {\n    return res.json({\n      error\n    });\n  }\n\n  res.json({\n    job: serialiseJob(job),\n    jobs: jobs.map(j => serialiseJob(j))\n  });\n});","map":{"version":3,"sources":["/Users/owen/Sites/macron-web/pages/api/save.js"],"names":["makeOrFindJob","serialiseJob","req","res","payload","JSON","parse","body","job","jobs","error","json","map","j"],"mappings":"AAAA;AACA,SAAQA,aAAR,QAA4B,qBAA5B;AACA,SAAQC,YAAR,QAA2B,qBAA3B;AAEA,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC/B,QAAMC,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWJ,GAAG,CAACK,IAAf,CAAhB;AACA,QAAM;AAAEC,IAAAA,GAAF;AAAOC,IAAAA,IAAP;AAAaC,IAAAA;AAAb,MAAuB,MAAMV,aAAa,CAACI,OAAD,CAAhD;;AAEA,MAAIM,KAAJ,EAAW;AACP,WAAOP,GAAG,CAACQ,IAAJ,CAAS;AAAED,MAAAA;AAAF,KAAT,CAAP;AACH;;AAEDP,EAAAA,GAAG,CAACQ,IAAJ,CAAS;AACLH,IAAAA,GAAG,EAAEP,YAAY,CAACO,GAAD,CADZ;AAELC,IAAAA,IAAI,EAAEA,IAAI,CAACG,GAAL,CAASC,CAAC,IAAIZ,YAAY,CAACY,CAAD,CAA1B;AAFD,GAAT;AAIH,CAZD","sourcesContent":["// Next.js API route support: https://nextjs.org/docs/api-routes/introduction\nimport {makeOrFindJob} from \"../../utils/crontab\";\nimport {serialiseJob} from \"../../utils/helpers\";\n\nexport default async (req, res) => {\n    const payload = JSON.parse(req.body);\n    const { job, jobs, error } = await makeOrFindJob(payload)\n\n    if (error) {\n        return res.json({ error });\n    }\n\n    res.json({\n        job: serialiseJob(job),\n        jobs: jobs.map(j => serialiseJob(j))\n    })\n}\n"]},"metadata":{},"sourceType":"module"}